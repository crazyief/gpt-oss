/**
 * Global CSS - Modern, Beautiful Design System
 *
 * Purpose: Modern ChatGPT-inspired design with gradients, shadows, and smooth animations
 *
 * File structure:
 * 1. Tailwind directives (base, components, utilities)
 * 2. Custom base styles with modern typography
 * 3. Smooth scrollbar styling
 * 4. PrismJS syntax highlighting theme
 */

/* Tailwind CSS directives */
@tailwind base;
@tailwind components;
@tailwind utilities;

/**
 * Theme System - CSS Variables
 * Supports: dark, matrix, light themes
 */

/* Dark Theme (Default) */
:root,
:root[data-theme="dark"] {
	/* Backgrounds */
	--bg-primary: #0f172a;
	--bg-secondary: #1e293b;
	--bg-tertiary: #334155;
	--bg-elevated: #1e293b;
	--bg-input: #0f172a;
	--bg-hover: #334155;

	/* Text */
	--text-primary: #f8fafc;
	--text-secondary: #94a3b8;
	--text-muted: #64748b;
	--text-inverse: #0f172a;

	/* Borders */
	--border-primary: rgba(255, 255, 255, 0.1);
	--border-secondary: rgba(255, 255, 255, 0.05);

	/* Accents */
	--accent: #3b82f6;
	--accent-hover: #60a5fa;
	--accent-muted: rgba(59, 130, 246, 0.2);

	/* Status */
	--success: #22c55e;
	--warning: #f59e0b;
	--error: #ef4444;

	/* Messages */
	--user-bg: rgba(59, 130, 246, 0.15);
	--user-border: rgba(59, 130, 246, 0.3);
	--assistant-bg: rgba(255, 255, 255, 0.05);
	--assistant-border: rgba(255, 255, 255, 0.1);

	/* Shadows */
	--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
	--shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4);
	--shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.5);

	/* Scrollbar */
	--scrollbar-thumb: #475569;
	--scrollbar-track: transparent;
}

/* Matrix Theme - Black & Green */
:root[data-theme="matrix"] {
	/* Backgrounds */
	--bg-primary: #0a0a0a;
	--bg-secondary: #0d1a0d;
	--bg-tertiary: #1a2e1a;
	--bg-elevated: #0d1a0d;
	--bg-input: #050505;
	--bg-hover: #1a2e1a;

	/* Text */
	--text-primary: #00ff41;
	--text-secondary: #00cc33;
	--text-muted: #009926;
	--text-inverse: #0a0a0a;

	/* Borders */
	--border-primary: rgba(0, 255, 65, 0.3);
	--border-secondary: rgba(0, 255, 65, 0.15);

	/* Accents */
	--accent: #00ff41;
	--accent-hover: #33ff66;
	--accent-muted: rgba(0, 255, 65, 0.2);

	/* Status */
	--success: #00ff41;
	--warning: #ffff00;
	--error: #ff0040;

	/* Messages */
	--user-bg: rgba(0, 255, 65, 0.1);
	--user-border: rgba(0, 255, 65, 0.3);
	--assistant-bg: rgba(0, 255, 65, 0.05);
	--assistant-border: rgba(0, 255, 65, 0.15);

	/* Shadows */
	--shadow-sm: 0 1px 2px rgba(0, 255, 65, 0.1);
	--shadow-md: 0 4px 12px rgba(0, 255, 65, 0.15);
	--shadow-lg: 0 10px 40px rgba(0, 255, 65, 0.2);

	/* Scrollbar */
	--scrollbar-thumb: #00992a;
	--scrollbar-track: transparent;
}

/* Light Theme */
:root[data-theme="light"] {
	/* Backgrounds */
	--bg-primary: #ffffff;
	--bg-secondary: #f8fafc;
	--bg-tertiary: #f1f5f9;
	--bg-elevated: #ffffff;
	--bg-input: #ffffff;
	--bg-hover: #e2e8f0;

	/* Text */
	--text-primary: #1e293b;
	--text-secondary: #64748b;
	--text-muted: #94a3b8;
	--text-inverse: #ffffff;

	/* Borders */
	--border-primary: #e2e8f0;
	--border-secondary: #f1f5f9;

	/* Accents */
	--accent: #3b82f6;
	--accent-hover: #2563eb;
	--accent-muted: rgba(59, 130, 246, 0.1);

	/* Status */
	--success: #22c55e;
	--warning: #f59e0b;
	--error: #ef4444;

	/* Messages */
	--user-bg: #eff6ff;
	--user-border: #dbeafe;
	--assistant-bg: #f9fafb;
	--assistant-border: #e5e7eb;

	/* Shadows */
	--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
	--shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
	--shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.15);

	/* Scrollbar */
	--scrollbar-thumb: #cbd5e1;
	--scrollbar-track: transparent;
}

/**
 * Custom base styles - Modern & Elegant
 */
@layer base {
	/* Box sizing reset for consistent layout */
	*,
	*::before,
	*::after {
		box-sizing: border-box;
	}

	/* Remove default margins */
	* {
		margin: 0;
	}

	/* Body defaults - Modern typography with theme support */
	body {
		line-height: 1.6;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', 'Roboto', 'Helvetica Neue', sans-serif;
		letter-spacing: -0.01em;
		background-color: var(--bg-primary);
		color: var(--text-primary);
		transition: background-color 0.3s ease, color 0.3s ease;
	}

	/* Improve media element defaults */
	img,
	picture,
	video,
	canvas,
	svg {
		display: block;
		max-width: 100%;
	}

	/* Remove built-in form typography */
	input,
	button,
	textarea,
	select {
		font: inherit;
	}

	/* Avoid text overflow */
	p,
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		overflow-wrap: break-word;
	}

	/* Smooth scrolling globally */
	html {
		scroll-behavior: smooth;
	}
}

/**
 * Custom component styles
 *
 * Reusable component classes
 */
@layer components {
	/* Button base styles */
	.btn {
		@apply px-4 py-2 rounded-lg font-medium transition-colors duration-200;
		@apply focus:outline-none focus:ring-2 focus:ring-offset-2;
	}

	.btn-primary {
		@apply bg-primary-500 text-white hover:bg-primary-600;
		@apply focus:ring-primary-500;
	}

	.btn-secondary {
		@apply bg-neutral-200 text-neutral-700 hover:bg-neutral-300;
		@apply focus:ring-neutral-500;
	}

	/* Input base styles */
	.input {
		@apply w-full px-3 py-2 border border-neutral-300 rounded-lg;
		@apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent;
		@apply transition-shadow duration-200;
	}

	/* Card component */
	.card {
		@apply bg-white rounded-lg shadow-chat border border-neutral-200;
	}
}

/**
 * Modern scrollbar styling with theme support
 */
::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

::-webkit-scrollbar-track {
	background: var(--scrollbar-track);
}

::-webkit-scrollbar-thumb {
	background: var(--scrollbar-thumb);
	border-radius: 4px;
	transition: background 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
	background: var(--accent);
}

/* Firefox scrollbar */
* {
	scrollbar-width: thin;
	scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}

/**
 * Smooth entrance animations
 */
@keyframes fadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

@keyframes slideUp {
	from {
		opacity: 0;
		transform: translateY(10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slideIn {
	from {
		opacity: 0;
		transform: translateX(-10px);
	}
	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes shimmer {
	0% {
		background-position: -1000px 0;
	}
	100% {
		background-position: 1000px 0;
	}
}

/**
 * PrismJS syntax highlighting theme - Theme-Aware
 * Supports: light, dark, matrix themes
 */
code[class*='language-'],
pre[class*='language-'] {
	font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', 'Monaco', monospace;
	font-size: 0.875rem;
	line-height: 1.6;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	tab-size: 4;
	hyphens: none;
}

/* ========================================
   LIGHT THEME - Code Blocks
   ======================================== */
:root[data-theme="light"] pre[class*='language-'],
:root[data-theme="light"] pre:not([class]) {
	padding: 1.25rem;
	margin: 0.75rem 0;
	overflow: auto;
	background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
	color: #334155;
	border: 1px solid #e2e8f0;
	border-radius: 0.75rem;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

:root[data-theme="light"] pre[class*='language-'] code,
:root[data-theme="light"] pre:not([class]) code {
	color: #334155;
}

/* Light theme - Inline code */
:root[data-theme="light"] :not(pre) > code {
	padding: 0.15rem 0.5rem;
	background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
	color: #1e40af;
	border-radius: 0.375rem;
	white-space: normal;
	font-weight: 500;
	border: 1px solid #bfdbfe;
}

/* Light theme - Syntax highlighting tokens */
:root[data-theme="light"] .token.comment,
:root[data-theme="light"] .token.prolog,
:root[data-theme="light"] .token.doctype,
:root[data-theme="light"] .token.cdata { color: #6b7280; }

:root[data-theme="light"] .token.punctuation { color: #6b7280; }
:root[data-theme="light"] .token.property,
:root[data-theme="light"] .token.tag,
:root[data-theme="light"] .token.boolean,
:root[data-theme="light"] .token.number,
:root[data-theme="light"] .token.constant,
:root[data-theme="light"] .token.symbol { color: #0891b2; }

:root[data-theme="light"] .token.selector,
:root[data-theme="light"] .token.attr-name,
:root[data-theme="light"] .token.string,
:root[data-theme="light"] .token.char,
:root[data-theme="light"] .token.builtin { color: #059669; }

:root[data-theme="light"] .token.operator,
:root[data-theme="light"] .token.entity,
:root[data-theme="light"] .token.url,
:root[data-theme="light"] .language-css .token.string,
:root[data-theme="light"] .style .token.string { color: #d97706; }

:root[data-theme="light"] .token.atrule,
:root[data-theme="light"] .token.attr-value,
:root[data-theme="light"] .token.keyword { color: #7c3aed; }

:root[data-theme="light"] .token.function { color: #dc2626; }
:root[data-theme="light"] .token.regex,
:root[data-theme="light"] .token.important,
:root[data-theme="light"] .token.variable { color: #ea580c; }

/* ========================================
   DARK THEME - Code Blocks
   ======================================== */
:root[data-theme="dark"] pre[class*='language-'],
:root[data-theme="dark"] pre:not([class]),
:root pre[class*='language-'],
:root pre:not([class]) {
	padding: 1.25rem;
	margin: 0.75rem 0;
	overflow: auto;
	background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
	color: #e2e8f0;
	border: 1px solid #334155;
	border-radius: 0.75rem;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

:root[data-theme="dark"] pre[class*='language-'] code,
:root[data-theme="dark"] pre:not([class]) code,
:root pre[class*='language-'] code,
:root pre:not([class]) code {
	color: #e2e8f0;
	background: transparent;
}

/* Dark theme - Inline code */
:root[data-theme="dark"] :not(pre) > code,
:root :not(pre) > code {
	padding: 0.2rem 0.5rem;
	background: linear-gradient(135deg, #334155 0%, #1e293b 100%);
	color: #93c5fd;
	border-radius: 0.375rem;
	white-space: normal;
	font-weight: 500;
	border: 1px solid #475569;
}

/* Dark theme - Syntax highlighting tokens */
:root[data-theme="dark"] .token.comment,
:root[data-theme="dark"] .token.prolog,
:root[data-theme="dark"] .token.doctype,
:root[data-theme="dark"] .token.cdata,
:root .token.comment,
:root .token.prolog,
:root .token.doctype,
:root .token.cdata { color: #64748b; font-style: italic; }

:root[data-theme="dark"] .token.punctuation,
:root .token.punctuation { color: #94a3b8; }

:root[data-theme="dark"] .token.property,
:root[data-theme="dark"] .token.tag,
:root[data-theme="dark"] .token.boolean,
:root[data-theme="dark"] .token.number,
:root[data-theme="dark"] .token.constant,
:root[data-theme="dark"] .token.symbol,
:root .token.property,
:root .token.tag,
:root .token.boolean,
:root .token.number,
:root .token.constant,
:root .token.symbol { color: #38bdf8; }

:root[data-theme="dark"] .token.selector,
:root[data-theme="dark"] .token.attr-name,
:root[data-theme="dark"] .token.string,
:root[data-theme="dark"] .token.char,
:root[data-theme="dark"] .token.builtin,
:root .token.selector,
:root .token.attr-name,
:root .token.string,
:root .token.char,
:root .token.builtin { color: #4ade80; }

:root[data-theme="dark"] .token.operator,
:root[data-theme="dark"] .token.entity,
:root[data-theme="dark"] .token.url,
:root[data-theme="dark"] .language-css .token.string,
:root[data-theme="dark"] .style .token.string,
:root .token.operator,
:root .token.entity,
:root .token.url,
:root .language-css .token.string,
:root .style .token.string { color: #fbbf24; }

:root[data-theme="dark"] .token.atrule,
:root[data-theme="dark"] .token.attr-value,
:root[data-theme="dark"] .token.keyword,
:root .token.atrule,
:root .token.attr-value,
:root .token.keyword { color: #c084fc; }

:root[data-theme="dark"] .token.function,
:root .token.function { color: #f472b6; }

:root[data-theme="dark"] .token.regex,
:root[data-theme="dark"] .token.important,
:root[data-theme="dark"] .token.variable,
:root .token.regex,
:root .token.important,
:root .token.variable { color: #fb923c; }

:root[data-theme="dark"] .token.class-name,
:root .token.class-name { color: #67e8f9; }

/* ========================================
   MATRIX THEME - Code Blocks (Black & Green)
   ======================================== */
:root[data-theme="matrix"] pre[class*='language-'],
:root[data-theme="matrix"] pre:not([class]) {
	padding: 1.25rem;
	margin: 0.75rem 0;
	overflow: auto;
	background: linear-gradient(135deg, #0d1a0d 0%, #050505 100%);
	color: #00ff41;
	border: 1px solid rgba(0, 255, 65, 0.3);
	border-radius: 0.75rem;
	box-shadow: 0 4px 12px rgba(0, 255, 65, 0.15), inset 0 1px 0 rgba(0, 255, 65, 0.1);
}

:root[data-theme="matrix"] pre[class*='language-'] code,
:root[data-theme="matrix"] pre:not([class]) code {
	color: #00ff41;
	background: transparent;
	text-shadow: 0 0 8px rgba(0, 255, 65, 0.5);
}

/* Matrix theme - Inline code */
:root[data-theme="matrix"] :not(pre) > code {
	padding: 0.2rem 0.5rem;
	background: linear-gradient(135deg, #0d1a0d 0%, #050505 100%);
	color: #00ff41;
	border-radius: 0.375rem;
	white-space: normal;
	font-weight: 500;
	border: 1px solid rgba(0, 255, 65, 0.3);
	text-shadow: 0 0 5px rgba(0, 255, 65, 0.5);
}

/* Matrix theme - Syntax highlighting tokens (all green shades) */
:root[data-theme="matrix"] .token.comment,
:root[data-theme="matrix"] .token.prolog,
:root[data-theme="matrix"] .token.doctype,
:root[data-theme="matrix"] .token.cdata { color: #006622; font-style: italic; }

:root[data-theme="matrix"] .token.punctuation { color: #00cc33; }

:root[data-theme="matrix"] .token.property,
:root[data-theme="matrix"] .token.tag,
:root[data-theme="matrix"] .token.boolean,
:root[data-theme="matrix"] .token.number,
:root[data-theme="matrix"] .token.constant,
:root[data-theme="matrix"] .token.symbol { color: #33ff66; }

:root[data-theme="matrix"] .token.selector,
:root[data-theme="matrix"] .token.attr-name,
:root[data-theme="matrix"] .token.string,
:root[data-theme="matrix"] .token.char,
:root[data-theme="matrix"] .token.builtin { color: #00ff88; }

:root[data-theme="matrix"] .token.operator,
:root[data-theme="matrix"] .token.entity,
:root[data-theme="matrix"] .token.url,
:root[data-theme="matrix"] .language-css .token.string,
:root[data-theme="matrix"] .style .token.string { color: #66ff99; }

:root[data-theme="matrix"] .token.atrule,
:root[data-theme="matrix"] .token.attr-value,
:root[data-theme="matrix"] .token.keyword { color: #00ffcc; text-shadow: 0 0 10px rgba(0, 255, 204, 0.5); }

:root[data-theme="matrix"] .token.function { color: #99ff99; }

:root[data-theme="matrix"] .token.regex,
:root[data-theme="matrix"] .token.important,
:root[data-theme="matrix"] .token.variable { color: #ccff00; }

:root[data-theme="matrix"] .token.class-name { color: #00ffaa; }
