{
  "id": "Stage1-task-002",
  "stage": 1,
  "phase": 2,
  "title": "Backend: Implement Project and Conversation CRUD APIs",
  "assigned_to": "Backend-Agent",
  "priority": "high",
  "status": "pending",
  "created_at": "2025-11-17T00:00:00+08:00",
  "estimated_effort": "6 hours",

  "description": "Implement RESTful API endpoints for project and conversation management",

  "requirements": [
    "POST /api/projects/create - Create new project",
    "GET /api/projects/list - List all projects",
    "POST /api/conversations/create - Create new conversation",
    "GET /api/conversations/list - List conversations with filters",
    "GET /api/conversations/{id} - Get conversation details",
    "PATCH /api/conversations/{id} - Update conversation title",
    "DELETE /api/conversations/{id} - Soft delete conversation",
    "GET /api/conversations/search?q=keyword - Search conversations",
    "Implement pagination for list endpoints",
    "Add proper error handling and validation"
  ],

  "deliverables": [
    "backend/app/api/projects.py (Project endpoints)",
    "backend/app/api/conversations.py (Conversation endpoints)",
    "backend/app/services/project_service.py (Business logic)",
    "backend/app/services/conversation_service.py (Business logic)",
    "Unit tests for all endpoints"
  ],

  "acceptance_criteria": [
    "All endpoints return correct HTTP status codes",
    "Request validation using Pydantic models",
    "Soft deletes use deleted_at column",
    "Search functionality works with partial matches",
    "Pagination includes total_count, page, limit",
    "All SQL queries use ORM (no raw SQL)",
    "Error responses follow consistent JSON format",
    "40% comment coverage",
    "Unit tests achieve >80% coverage for services"
  ],

  "dependencies": ["Stage1-task-001"],

  "api_contracts": {
    "create_project": {
      "method": "POST",
      "path": "/api/projects/create",
      "request_body": {"name": "string", "description": "string?"},
      "response": {"id": "int", "name": "string", "created_at": "datetime"}
    },
    "list_conversations": {
      "method": "GET",
      "path": "/api/conversations/list",
      "query_params": {"project_id?": "int", "limit": "int", "offset": "int"},
      "response": {"conversations": "array", "total_count": "int"}
    }
  },

  "technical_notes": {
    "soft_delete": "Use deleted_at IS NULL in all queries",
    "search": "Use SQLite FTS5 or LIKE for text search",
    "pagination_default": "limit=50, max_limit=100"
  }
}
